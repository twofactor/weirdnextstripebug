{"ast":null,"code":"// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nconst stripe = require(\"stripe\")(\"sk_test_ovcw5Ie47XBp00qRQCaZTgBN00zWm9ePDa\");\n\nconst calculateOrderAmount = items => {\n  // Replace this constant with a calculation of the order's amount\n  // Calculate the order total on the server to prevent\n  // people from directly manipulating the amount on the client\n  return 1400;\n};\n\nexport default (async (req, res) => {\n  const {\n    items\n  } = req.body; // Create a PaymentIntent with the order amount and currency\n\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: calculateOrderAmount(items),\n    currency: \"usd\"\n  });\n  res.send({\n    clientSecret: paymentIntent.client_secret\n  });\n});","map":{"version":3,"sources":["/Users/david/Development/weirdstripebug/pages/api/create-payment-intent.js"],"names":["stripe","require","calculateOrderAmount","items","req","res","body","paymentIntent","paymentIntents","create","amount","currency","send","clientSecret","client_secret"],"mappings":"AAAA;AACA,MAAMA,MAAM,GAAGC,OAAO,CAAC,QAAD,CAAP,CAAkB,4CAAlB,CAAf;;AAEA,MAAMC,oBAAoB,GAAIC,KAAD,IAAW;AACtC;AACA;AACA;AACA,SAAO,IAAP;AACD,CALD;;AAOA,gBAAe,OAAOC,GAAP,EAAYC,GAAZ,KAAoB;AACjC,QAAM;AAAEF,IAAAA;AAAF,MAAYC,GAAG,CAACE,IAAtB,CADiC,CAEjC;;AACA,QAAMC,aAAa,GAAG,MAAMP,MAAM,CAACQ,cAAP,CAAsBC,MAAtB,CAA6B;AACvDC,IAAAA,MAAM,EAAER,oBAAoB,CAACC,KAAD,CAD2B;AAEvDQ,IAAAA,QAAQ,EAAE;AAF6C,GAA7B,CAA5B;AAIAN,EAAAA,GAAG,CAACO,IAAJ,CAAS;AACPC,IAAAA,YAAY,EAAEN,aAAa,CAACO;AADrB,GAAT;AAGD,CAVD","sourcesContent":["// Next.js API route support: https://nextjs.org/docs/api-routes/introduction\nconst stripe = require(\"stripe\")(\"sk_test_ovcw5Ie47XBp00qRQCaZTgBN00zWm9ePDa\");\n\nconst calculateOrderAmount = (items) => {\n  // Replace this constant with a calculation of the order's amount\n  // Calculate the order total on the server to prevent\n  // people from directly manipulating the amount on the client\n  return 1400;\n};\n\nexport default async (req, res) => {\n  const { items } = req.body;\n  // Create a PaymentIntent with the order amount and currency\n  const paymentIntent = await stripe.paymentIntents.create({\n    amount: calculateOrderAmount(items),\n    currency: \"usd\",\n  });\n  res.send({\n    clientSecret: paymentIntent.client_secret,\n  });\n};\n"]},"metadata":{},"sourceType":"module"}