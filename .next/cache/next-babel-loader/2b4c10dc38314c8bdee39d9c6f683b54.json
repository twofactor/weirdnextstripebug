{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/david/Development/weirdstripebug/components/payments/CheckoutForm.js\",\n    _s = $RefreshSig$();\n\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect } from \"react\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { BlueButton, Input, Card } from \"../ui/DavidComponents\";\nexport default function CheckoutForm(props) {\n  _s();\n\n  var _useState = useState(false),\n      succeeded = _useState[0],\n      setSucceeded = _useState[1];\n\n  var _useState2 = useState(null),\n      error = _useState2[0],\n      setError = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      processing = _useState3[0],\n      setProcessing = _useState3[1];\n\n  var _useState4 = useState(true),\n      disabled = _useState4[0],\n      setDisabled = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      email = _useState5[0],\n      setEmail = _useState5[1];\n\n  var _useState6 = useState(\"\"),\n      clientSecret = _useState6[0],\n      setClientSecret = _useState6[1];\n\n  var stripe = useStripe();\n  var elements = useElements();\n  useEffect(function () {\n    // Create PaymentIntent as soon as the page loads\n    window.fetch(\"/api/create-payment-intent\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        items: [{\n          id: \"xl-tshirt\"\n        }]\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      setClientSecret(data.clientSecret);\n    });\n  }, []);\n  var cardStyle = {\n    style: {\n      base: {\n        color: \"#32325d\",\n        fontFamily: \"Inter, sans-serif\",\n        fontSmoothing: \"antialiased\",\n        fontSize: \"16px\",\n        \"::placeholder\": {\n          color: \"#32325d\"\n        }\n      },\n      invalid: {\n        color: \"#fa755a\",\n        iconColor: \"#fa755a\"\n      }\n    }\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(ev) {\n      var payload;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              ev.preventDefault();\n              setProcessing(true);\n              _context.next = 4;\n              return stripe.confirmCardPayment(clientSecret, {\n                receipt_email: email,\n                payment_method: {\n                  card: elements.getElement(CardElement),\n                  billing_details: {\n                    name: ev.target.name.value\n                  }\n                }\n              });\n\n            case 4:\n              payload = _context.sent;\n\n              if (payload.error) {\n                setError(\"Payment failed \".concat(payload.error.message));\n                setProcessing(false);\n              } else {\n                setError(null);\n                setProcessing(false);\n                setSucceeded(true);\n              }\n\n            case 6:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var handleChange = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event) {\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              // Listen for changes in the CardElement\n              // and display any errors as the customer types their card details\n              setDisabled(event.empty);\n              setError(event.error ? event.error.message : \"\");\n\n            case 2:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2);\n    }));\n\n    return function handleChange(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(\"div\", {\n    className: \"jsx-2480997194\" + \" \" + \"payment-form\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 5\n    }\n  }, __jsx(_JSXStyle, {\n    id: \"2480997194\",\n    __self: this\n  }, \".payment-form.jsx-2480997194{font-family:\\\"Inter\\\",-apple-system,BlinkMacSystemFont,sans-serif;font-size:1rem;-webkit-font-smoothing:antialiased;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;-webkit-align-content:center;-ms-flex-line-pack:center;align-content:center;height:100vh;width:100vw;}form.jsx-2480997194{width:30vw;-webkit-align-self:center;-ms-flex-item-align:center;align-self:center;}label.jsx-2480997194{font-size:0.9rem;font-weight:400;color:#2d3748;margin-bottom:12px;}input.jsx-2480997194{border-radius:16px;margin-bottom:6px;padding:12px;padding-left:16px;border:1px solid #e2e8f0;max-height:60px;font-size:1rem;width:100%;background:white;box-sizing:border-box;font-weight:500;margin-bottom:12px;}input.jsx-2480997194::-webkit-input-placeholder{color:#a0aec0;}input.jsx-2480997194::-moz-placeholder{color:#a0aec0;}input.jsx-2480997194:-ms-input-placeholder{color:#a0aec0;}input.jsx-2480997194::placeholder{color:#a0aec0;}input.jsx-2480997194:focus{border-radius:16px;}.result-message.jsx-2480997194{line-height:22px;font-size:16px;}.result-message.jsx-2480997194 a.jsx-2480997194{color:rgb(89,111,214);font-weight:600;-webkit-text-decoration:none;text-decoration:none;}.hidden.jsx-2480997194{display:none;}.card-error.jsx-2480997194{color:rgb(105,115,134);font-size:16px;line-height:20px;margin-top:12px;text-align:center;}.card-element.jsx-2480997194{border-radius:16px;padding:12px;border:1px solid #e2e8f0;width:100%;background:white;box-sizing:border-box;margin-bottom:16px;}#payment-request-button.jsx-2480997194{margin-bottom:32px;}button.jsx-2480997194{background:#3182ce;color:#ffffff;border-radius:16px;border:1px solid #2a69ac;padding:12px 16px;font-size:16px;font-weight:600;cursor:pointer;display:block;-webkit-transition:all 0.2s ease;transition:all 0.2s ease;box-shadow:0px 4px 5.5px 0px rgba(0,0,0,0.07);width:100%;}button.jsx-2480997194:hover{background:#2a69ac;}button.jsx-2480997194:disabled{opacity:0.5;cursor:default;}.spinner.jsx-2480997194,.spinner.jsx-2480997194:before,.spinner.jsx-2480997194:after{border-radius:50%;}.spinner.jsx-2480997194{color:#ffffff;font-size:22px;text-indent:-99999px;margin:0px auto;position:relative;width:20px;height:20px;box-shadow:inset 0 0 0 2px;-webkit-transform:translateZ(0);-ms-transform:translateZ(0);-webkit-transform:translateZ(0);-ms-transform:translateZ(0);transform:translateZ(0);}.spinner.jsx-2480997194:before,.spinner.jsx-2480997194:after{position:absolute;content:\\\"\\\";}.spinner.jsx-2480997194:before{width:10.4px;height:20.4px;background:#5469d4;border-radius:20.4px 0 0 20.4px;top:-0.2px;left:-0.2px;-webkit-transform-origin:10.4px 10.2px;-webkit-transform-origin:10.4px 10.2px;-ms-transform-origin:10.4px 10.2px;transform-origin:10.4px 10.2px;-webkit-animation:loading 2s infinite ease 1.5s;-webkit-animation:loading-jsx-2480997194 2s infinite ease 1.5s;animation:loading-jsx-2480997194 2s infinite ease 1.5s;}.spinner.jsx-2480997194:after{width:10.4px;height:10.2px;background:#5469d4;border-radius:0 10.2px 10.2px 0;top:-0.1px;left:10.2px;-webkit-transform-origin:0px 10.2px;-webkit-transform-origin:0px 10.2px;-ms-transform-origin:0px 10.2px;transform-origin:0px 10.2px;-webkit-animation:loading 2s infinite ease;-webkit-animation:loading-jsx-2480997194 2s infinite ease;animation:loading-jsx-2480997194 2s infinite ease;}@-webkit-keyframes loading-jsx-2480997194{0%{-webkit-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes loading-jsx-2480997194{0%{-webkit-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);}100%{-webkit-transform:rotate(360deg);-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@media only screen and (max-width:600px){form.jsx-2480997194{width:80vw;}}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9kYXZpZC9EZXZlbG9wbWVudC93ZWlyZHN0cmlwZWJ1Zy9jb21wb25lbnRzL3BheW1lbnRzL0NoZWNrb3V0Rm9ybS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFpRmtCLEFBRzhFLEFBVXhELEFBSU0sQUFNRSxBQWVMLEFBSUssQUFJRixBQUlPLEFBS1gsQUFHWSxBQVFOLEFBVUEsQUFJQSxBQWNBLEFBR1AsQUFPTSxBQUdKLEFBY0ksQUFJTCxBQVlBLEFBYW9CLEFBSUUsQUFNdEIsV0FsSkssQUFtSmxCLENBL0RlLENBMUNqQixBQXNFZ0IsQUFZQSxDQW5HaEIsQUFxRWlCLEdBMUZDLEFBNkJELENBMERqQixBQWlCYSxDQWxHTyxBQW1CcEIsQUF3QmUsQUFVZixBQUlnQixBQWNoQixHQTVDa0IsQ0FRRCxJQXdDakIsQUE0QnFCLEFBWUEsRUE5QkUsQUFjdkIsRUE0QjJCLENBdkczQixBQW9CMkIsQ0FqRFgsQUErREssQUF5RVEsSUFsSWQsQ0EyQlEsQUFRSixRQW9FZSxBQVlBLENBeEhiLEdBTUQsQUFvRkYsRUEzQlMsR0F0QlQsRUFRTCxPQWpFSSxFQWlCakIsQUEwRm9CLEVBcEZPLEFBMkNSLEdBUkMsTUFzQkEsQ0E2Q1AsQUFZQSxDQXhJd0IsR0FVckMsRUFpR2EsQ0F6Q1csR0FsQnhCLENBVUEsQUFtRWMsQUFZQSxJQWxISSxFQXlERCxBQTRCSCxNQWtCMkIsQUFZSCxNQXZFakIsQUEwQ1EsRUFyRlosQ0F5REMsRUFrRWhCLEVBbEphLE1Bc0piLElBOUhXLEVBMkNiLEFBY2lCLFFBNEJpQixDQXBGZixFQWlIVyxHQVpHLENBNUNqQixXQXhEUSxHQXlERyxXQTJCRyxRQW5GWixjQTFCTyxFQTJCSixJQW1GSyxlQWxGMUIsSUF1RG1ELG9CQXVETixZQVpLLGNBMUNyQyxXQUNiLE1Bc0RxQyxFQTVCckMsU0E5R3VCLE1BOEhtQixzRUE3SDNCLGFBQ0QsUUF5SWQsSUF4SUEsdUJBNEhBIiwiZmlsZSI6Ii9Vc2Vycy9kYXZpZC9EZXZlbG9wbWVudC93ZWlyZHN0cmlwZWJ1Zy9jb21wb25lbnRzL3BheW1lbnRzL0NoZWNrb3V0Rm9ybS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBSZWFjdCwgeyB1c2VTdGF0ZSwgdXNlRWZmZWN0IH0gZnJvbSBcInJlYWN0XCI7XG5pbXBvcnQgeyBDYXJkRWxlbWVudCwgdXNlU3RyaXBlLCB1c2VFbGVtZW50cyB9IGZyb20gXCJAc3RyaXBlL3JlYWN0LXN0cmlwZS1qc1wiO1xuaW1wb3J0IHsgQmx1ZUJ1dHRvbiwgSW5wdXQsIENhcmQgfSBmcm9tIFwiLi4vdWkvRGF2aWRDb21wb25lbnRzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENoZWNrb3V0Rm9ybShwcm9wcykge1xuICBjb25zdCBbc3VjY2VlZGVkLCBzZXRTdWNjZWVkZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbZXJyb3IsIHNldEVycm9yXSA9IHVzZVN0YXRlKG51bGwpO1xuICBjb25zdCBbcHJvY2Vzc2luZywgc2V0UHJvY2Vzc2luZ10gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2Rpc2FibGVkLCBzZXREaXNhYmxlZF0gPSB1c2VTdGF0ZSh0cnVlKTtcbiAgY29uc3QgW2VtYWlsLCBzZXRFbWFpbF0gPSB1c2VTdGF0ZShcIlwiKTtcbiAgY29uc3QgW2NsaWVudFNlY3JldCwgc2V0Q2xpZW50U2VjcmV0XSA9IHVzZVN0YXRlKFwiXCIpO1xuICBjb25zdCBzdHJpcGUgPSB1c2VTdHJpcGUoKTtcbiAgY29uc3QgZWxlbWVudHMgPSB1c2VFbGVtZW50cygpO1xuXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gQ3JlYXRlIFBheW1lbnRJbnRlbnQgYXMgc29vbiBhcyB0aGUgcGFnZSBsb2Fkc1xuICAgIHdpbmRvd1xuICAgICAgLmZldGNoKFwiL2FwaS9jcmVhdGUtcGF5bWVudC1pbnRlbnRcIiwge1xuICAgICAgICBtZXRob2Q6IFwiUE9TVFwiLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgICAgIH0sXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgaXRlbXM6IFt7IGlkOiBcInhsLXRzaGlydFwiIH1dIH0pLFxuICAgICAgfSlcbiAgICAgIC50aGVuKChyZXMpID0+IHtcbiAgICAgICAgcmV0dXJuIHJlcy5qc29uKCk7XG4gICAgICB9KVxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcbiAgICAgICAgc2V0Q2xpZW50U2VjcmV0KGRhdGEuY2xpZW50U2VjcmV0KTtcbiAgICAgIH0pO1xuICB9LCBbXSk7XG5cbiAgY29uc3QgY2FyZFN0eWxlID0ge1xuICAgIHN0eWxlOiB7XG4gICAgICBiYXNlOiB7XG4gICAgICAgIGNvbG9yOiBcIiMzMjMyNWRcIixcbiAgICAgICAgZm9udEZhbWlseTogXCJJbnRlciwgc2Fucy1zZXJpZlwiLFxuICAgICAgICBmb250U21vb3RoaW5nOiBcImFudGlhbGlhc2VkXCIsXG4gICAgICAgIGZvbnRTaXplOiBcIjE2cHhcIixcbiAgICAgICAgXCI6OnBsYWNlaG9sZGVyXCI6IHtcbiAgICAgICAgICBjb2xvcjogXCIjMzIzMjVkXCIsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgaW52YWxpZDoge1xuICAgICAgICBjb2xvcjogXCIjZmE3NTVhXCIsXG4gICAgICAgIGljb25Db2xvcjogXCIjZmE3NTVhXCIsXG4gICAgICB9LFxuICAgIH0sXG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gYXN5bmMgKGV2KSA9PiB7XG4gICAgZXYucHJldmVudERlZmF1bHQoKTtcbiAgICBzZXRQcm9jZXNzaW5nKHRydWUpO1xuICAgIGNvbnN0IHBheWxvYWQgPSBhd2FpdCBzdHJpcGUuY29uZmlybUNhcmRQYXltZW50KGNsaWVudFNlY3JldCwge1xuICAgICAgcmVjZWlwdF9lbWFpbDogZW1haWwsXG4gICAgICBwYXltZW50X21ldGhvZDoge1xuICAgICAgICBjYXJkOiBlbGVtZW50cy5nZXRFbGVtZW50KENhcmRFbGVtZW50KSxcbiAgICAgICAgYmlsbGluZ19kZXRhaWxzOiB7XG4gICAgICAgICAgbmFtZTogZXYudGFyZ2V0Lm5hbWUudmFsdWUsXG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgIH0pO1xuICAgIGlmIChwYXlsb2FkLmVycm9yKSB7XG4gICAgICBzZXRFcnJvcihgUGF5bWVudCBmYWlsZWQgJHtwYXlsb2FkLmVycm9yLm1lc3NhZ2V9YCk7XG4gICAgICBzZXRQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2V0RXJyb3IobnVsbCk7XG4gICAgICBzZXRQcm9jZXNzaW5nKGZhbHNlKTtcbiAgICAgIHNldFN1Y2NlZWRlZCh0cnVlKTtcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gYXN5bmMgKGV2ZW50KSA9PiB7XG4gICAgLy8gTGlzdGVuIGZvciBjaGFuZ2VzIGluIHRoZSBDYXJkRWxlbWVudFxuICAgIC8vIGFuZCBkaXNwbGF5IGFueSBlcnJvcnMgYXMgdGhlIGN1c3RvbWVyIHR5cGVzIHRoZWlyIGNhcmQgZGV0YWlsc1xuICAgIHNldERpc2FibGVkKGV2ZW50LmVtcHR5KTtcbiAgICBzZXRFcnJvcihldmVudC5lcnJvciA/IGV2ZW50LmVycm9yLm1lc3NhZ2UgOiBcIlwiKTtcbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwicGF5bWVudC1mb3JtXCI+XG4gICAgICA8c3R5bGUganN4PntgXG4gICAgICAgIC5wYXltZW50LWZvcm0ge1xuICAgICAgICAgIGZvbnQtZmFtaWx5OiBcIkludGVyXCIsIC1hcHBsZS1zeXN0ZW0sIEJsaW5rTWFjU3lzdGVtRm9udCwgc2Fucy1zZXJpZjtcbiAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgLXdlYmtpdC1mb250LXNtb290aGluZzogYW50aWFsaWFzZWQ7XG4gICAgICAgICAgZGlzcGxheTogZmxleDtcbiAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjtcbiAgICAgICAgICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gICAgICAgICAgaGVpZ2h0OiAxMDB2aDtcbiAgICAgICAgICB3aWR0aDogMTAwdnc7XG4gICAgICAgIH1cbiAgICAgICAgZm9ybSB7XG4gICAgICAgICAgd2lkdGg6IDMwdnc7XG4gICAgICAgICAgYWxpZ24tc2VsZjogY2VudGVyO1xuICAgICAgICB9XG4gICAgICAgIGxhYmVsIHtcbiAgICAgICAgICBmb250LXNpemU6IDAuOXJlbTtcbiAgICAgICAgICBmb250LXdlaWdodDogNDAwO1xuICAgICAgICAgIGNvbG9yOiAjMmQzNzQ4O1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIH1cbiAgICAgICAgaW5wdXQge1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgICAgICAgbWFyZ2luLWJvdHRvbTogNnB4O1xuICAgICAgICAgIHBhZGRpbmc6IDEycHg7XG4gICAgICAgICAgcGFkZGluZy1sZWZ0OiAxNnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMmU4ZjA7XG4gICAgICAgICAgbWF4LWhlaWdodDogNjBweDtcbiAgICAgICAgICBmb250LXNpemU6IDFyZW07XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICBmb250LXdlaWdodDogNTAwO1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEycHg7XG4gICAgICAgIH1cblxuICAgICAgICBpbnB1dDo6cGxhY2Vob2xkZXIge1xuICAgICAgICAgIGNvbG9yOiAjYTBhZWMwO1xuICAgICAgICB9XG5cbiAgICAgICAgaW5wdXQ6Zm9jdXMge1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgICAgIH1cblxuICAgICAgICAucmVzdWx0LW1lc3NhZ2Uge1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMnB4O1xuICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDtcbiAgICAgICAgfVxuICAgICAgICAucmVzdWx0LW1lc3NhZ2UgYSB7XG4gICAgICAgICAgY29sb3I6IHJnYig4OSwgMTExLCAyMTQpO1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lO1xuICAgICAgICB9XG4gICAgICAgIC5oaWRkZW4ge1xuICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XG4gICAgICAgIH1cbiAgICAgICAgLmNhcmQtZXJyb3Ige1xuICAgICAgICAgIGNvbG9yOiByZ2IoMTA1LCAxMTUsIDEzNCk7XG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgIGxpbmUtaGVpZ2h0OiAyMHB4O1xuICAgICAgICAgIG1hcmdpbi10b3A6IDEycHg7XG4gICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xuICAgICAgICB9XG5cbiAgICAgICAgLmNhcmQtZWxlbWVudCB7XG4gICAgICAgICAgYm9yZGVyLXJhZGl1czogMTZweDtcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4O1xuICAgICAgICAgIGJvcmRlcjogMXB4IHNvbGlkICNlMmU4ZjA7XG4gICAgICAgICAgd2lkdGg6IDEwMCU7XG4gICAgICAgICAgYmFja2dyb3VuZDogd2hpdGU7XG4gICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDtcbiAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxNnB4O1xuICAgICAgICB9XG5cbiAgICAgICAgI3BheW1lbnQtcmVxdWVzdC1idXR0b24ge1xuICAgICAgICAgIG1hcmdpbi1ib3R0b206IDMycHg7XG4gICAgICAgIH1cbiAgICAgICAgLyogQnV0dG9ucyBhbmQgbGlua3MgKi9cbiAgICAgICAgYnV0dG9uIHtcbiAgICAgICAgICBiYWNrZ3JvdW5kOiAjMzE4MmNlO1xuICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE2cHg7XG4gICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgIzJhNjlhYztcbiAgICAgICAgICBwYWRkaW5nOiAxMnB4IDE2cHg7XG4gICAgICAgICAgZm9udC1zaXplOiAxNnB4O1xuICAgICAgICAgIGZvbnQtd2VpZ2h0OiA2MDA7XG4gICAgICAgICAgY3Vyc29yOiBwb2ludGVyO1xuICAgICAgICAgIGRpc3BsYXk6IGJsb2NrO1xuICAgICAgICAgIHRyYW5zaXRpb246IGFsbCAwLjJzIGVhc2U7XG4gICAgICAgICAgYm94LXNoYWRvdzogMHB4IDRweCA1LjVweCAwcHggcmdiYSgwLCAwLCAwLCAwLjA3KTtcbiAgICAgICAgICB3aWR0aDogMTAwJTtcbiAgICAgICAgfVxuICAgICAgICBidXR0b246aG92ZXIge1xuICAgICAgICAgIGJhY2tncm91bmQ6ICMyYTY5YWM7XG4gICAgICAgIH1cbiAgICAgICAgYnV0dG9uOmRpc2FibGVkIHtcbiAgICAgICAgICBvcGFjaXR5OiAwLjU7XG4gICAgICAgICAgY3Vyc29yOiBkZWZhdWx0O1xuICAgICAgICB9XG4gICAgICAgIC8qIHNwaW5uZXIvcHJvY2Vzc2luZyBzdGF0ZSwgZXJyb3JzICovXG4gICAgICAgIC5zcGlubmVyLFxuICAgICAgICAuc3Bpbm5lcjpiZWZvcmUsXG4gICAgICAgIC5zcGlubmVyOmFmdGVyIHtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7XG4gICAgICAgIH1cbiAgICAgICAgLnNwaW5uZXIge1xuICAgICAgICAgIGNvbG9yOiAjZmZmZmZmO1xuICAgICAgICAgIGZvbnQtc2l6ZTogMjJweDtcbiAgICAgICAgICB0ZXh0LWluZGVudDogLTk5OTk5cHg7XG4gICAgICAgICAgbWFyZ2luOiAwcHggYXV0bztcbiAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gICAgICAgICAgd2lkdGg6IDIwcHg7XG4gICAgICAgICAgaGVpZ2h0OiAyMHB4O1xuICAgICAgICAgIGJveC1zaGFkb3c6IGluc2V0IDAgMCAwIDJweDtcbiAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcbiAgICAgICAgICAtbXMtdHJhbnNmb3JtOiB0cmFuc2xhdGVaKDApO1xuICAgICAgICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlWigwKTtcbiAgICAgICAgfVxuICAgICAgICAuc3Bpbm5lcjpiZWZvcmUsXG4gICAgICAgIC5zcGlubmVyOmFmdGVyIHtcbiAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gICAgICAgICAgY29udGVudDogXCJcIjtcbiAgICAgICAgfVxuICAgICAgICAuc3Bpbm5lcjpiZWZvcmUge1xuICAgICAgICAgIHdpZHRoOiAxMC40cHg7XG4gICAgICAgICAgaGVpZ2h0OiAyMC40cHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzU0NjlkNDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAyMC40cHggMCAwIDIwLjRweDtcbiAgICAgICAgICB0b3A6IC0wLjJweDtcbiAgICAgICAgICBsZWZ0OiAtMC4ycHg7XG4gICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAxMC40cHggMTAuMnB4O1xuICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDEwLjRweCAxMC4ycHg7XG4gICAgICAgICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZSAxLjVzO1xuICAgICAgICAgIGFuaW1hdGlvbjogbG9hZGluZyAycyBpbmZpbml0ZSBlYXNlIDEuNXM7XG4gICAgICAgIH1cbiAgICAgICAgLnNwaW5uZXI6YWZ0ZXIge1xuICAgICAgICAgIHdpZHRoOiAxMC40cHg7XG4gICAgICAgICAgaGVpZ2h0OiAxMC4ycHg7XG4gICAgICAgICAgYmFja2dyb3VuZDogIzU0NjlkNDtcbiAgICAgICAgICBib3JkZXItcmFkaXVzOiAwIDEwLjJweCAxMC4ycHggMDtcbiAgICAgICAgICB0b3A6IC0wLjFweDtcbiAgICAgICAgICBsZWZ0OiAxMC4ycHg7XG4gICAgICAgICAgLXdlYmtpdC10cmFuc2Zvcm0tb3JpZ2luOiAwcHggMTAuMnB4O1xuICAgICAgICAgIHRyYW5zZm9ybS1vcmlnaW46IDBweCAxMC4ycHg7XG4gICAgICAgICAgLXdlYmtpdC1hbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZTtcbiAgICAgICAgICBhbmltYXRpb246IGxvYWRpbmcgMnMgaW5maW5pdGUgZWFzZTtcbiAgICAgICAgfVxuICAgICAgICBAa2V5ZnJhbWVzIGxvYWRpbmcge1xuICAgICAgICAgIDAlIHtcbiAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgMTAwJSB7XG4gICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDM2MGRlZyk7XG4gICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBAbWVkaWEgb25seSBzY3JlZW4gYW5kIChtYXgtd2lkdGg6IDYwMHB4KSB7XG4gICAgICAgICAgZm9ybSB7XG4gICAgICAgICAgICB3aWR0aDogODB2dztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIGB9PC9zdHlsZT5cblxuICAgICAgPGZvcm0gaWQ9XCJwYXltZW50LWZvcm1cIiBvblN1Ym1pdD17aGFuZGxlU3VibWl0fT5cbiAgICAgICAgPGxhYmVsPkVtYWlsIEFkZHJlc3M8L2xhYmVsPlxuICAgICAgICA8aW5wdXRcbiAgICAgICAgICB0eXBlPVwidGV4dFwiXG4gICAgICAgICAgdmFsdWU9e2VtYWlsfVxuICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgIHBsYWNlaG9sZGVyPVwiRW50ZXIgZW1haWwgYWRkcmVzc1wiXG4gICAgICAgIC8+XG4gICAgICAgIDxkaXYgaWQ9XCJjYXJkLWVsZW1lbnRcIiBjbGFzc05hbWU9XCJjYXJkLWVsZW1lbnRcIj5cbiAgICAgICAgICA8Q2FyZEVsZW1lbnQgb3B0aW9ucz17Y2FyZFN0eWxlfSBvbkNoYW5nZT17aGFuZGxlQ2hhbmdlfSAvPlxuICAgICAgICA8L2Rpdj5cbiAgICAgICAgPGJ1dHRvbiBpc0Rpc2FibGVkPXtwcm9jZXNzaW5nIHx8IGRpc2FibGVkIHx8IHN1Y2NlZWRlZH0gaWQ9XCJzdWJtaXRcIj5cbiAgICAgICAgICA8c3BhbiBpZD1cImJ1dHRvbi10ZXh0XCI+XG4gICAgICAgICAgICB7cHJvY2Vzc2luZyA/IDxkaXYgY2xhc3NOYW1lPVwic3Bpbm5lclwiIGlkPVwic3Bpbm5lclwiPjwvZGl2PiA6IFwiUGF5XCJ9XG4gICAgICAgICAgPC9zcGFuPlxuICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgPEJsdWVCdXR0b24+VGVzdDwvQmx1ZUJ1dHRvbj5cbiAgICAgIDwvZm9ybT5cbiAgICAgIHsvKiBTaG93IGFueSBlcnJvciB0aGF0IGhhcHBlbnMgd2hlbiBwcm9jZXNzaW5nIHRoZSBwYXltZW50ICovfVxuICAgICAge2Vycm9yICYmIChcbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWVycm9yXCIgcm9sZT1cImFsZXJ0XCI+XG4gICAgICAgICAge2Vycm9yfVxuICAgICAgICA8L2Rpdj5cbiAgICAgICl9XG4gICAgICB7LyogU2hvdyBhIHN1Y2Nlc3MgbWVzc2FnZSB1cG9uIGNvbXBsZXRpb24gKi99XG4gICAgICB7c3VjY2VlZGVkICYmIChcbiAgICAgICAgPHA+XG4gICAgICAgICAgUGF5bWVudCBzdWNjZWVkZWQsIHNlZSB0aGUgcmVzdWx0IGluIHlvdXJcbiAgICAgICAgICA8YSBocmVmPXtgaHR0cHM6Ly9kYXNoYm9hcmQuc3RyaXBlLmNvbS90ZXN0L3BheW1lbnRzYH0+XG4gICAgICAgICAgICB7XCIgXCJ9XG4gICAgICAgICAgICBTdHJpcGUgZGFzaGJvYXJkLlxuICAgICAgICAgIDwvYT57XCIgXCJ9XG4gICAgICAgICAgUmVmcmVzaCB0aGUgcGFnZSB0byBwYXkgYWdhaW4uXG4gICAgICAgIDwvcD5cbiAgICAgICl9XG4gICAgPC9kaXY+XG4gICk7XG59XG4iXX0= */\\n/*@ sourceURL=/Users/david/Development/weirdstripebug/components/payments/CheckoutForm.js */\"), __jsx(\"form\", {\n    id: \"payment-form\",\n    onSubmit: handleSubmit,\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 246,\n      columnNumber: 7\n    }\n  }, __jsx(\"label\", {\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 247,\n      columnNumber: 9\n    }\n  }, \"Email Address\"), __jsx(\"input\", {\n    type: \"text\",\n    value: email,\n    onChange: function onChange(e) {\n      return setEmail(e.target.value);\n    },\n    placeholder: \"Enter email address\",\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 9\n    }\n  }), __jsx(\"div\", {\n    id: \"card-element\",\n    className: \"jsx-2480997194\" + \" \" + \"card-element\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }\n  }, __jsx(CardElement, {\n    options: cardStyle,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 255,\n      columnNumber: 11\n    }\n  })), __jsx(\"button\", {\n    isDisabled: processing || disabled || succeeded,\n    id: \"submit\",\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 257,\n      columnNumber: 9\n    }\n  }, __jsx(\"span\", {\n    id: \"button-text\",\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 11\n    }\n  }, processing ? __jsx(\"div\", {\n    id: \"spinner\",\n    className: \"jsx-2480997194\" + \" \" + \"spinner\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 259,\n      columnNumber: 27\n    }\n  }) : \"Pay\")), __jsx(BlueButton, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 9\n    }\n  }, \"Test\")), error && __jsx(\"div\", {\n    role: \"alert\",\n    className: \"jsx-2480997194\" + \" \" + \"card-error\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 266,\n      columnNumber: 9\n    }\n  }, error), succeeded && __jsx(\"p\", {\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 9\n    }\n  }, \"Payment succeeded, see the result in your\", __jsx(\"a\", {\n    href: \"https://dashboard.stripe.com/test/payments\",\n    className: \"jsx-2480997194\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 11\n    }\n  }, \" \", \"Stripe dashboard.\"), \" \", \"Refresh the page to pay again.\"));\n}\n\n_s(CheckoutForm, \"dyXLRaE84P5uCSGkhjl374NBT7w=\", false, function () {\n  return [useStripe, useElements];\n});\n\n_c = CheckoutForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"CheckoutForm\");","map":{"version":3,"sources":["/Users/david/Development/weirdstripebug/components/payments/CheckoutForm.js"],"names":["React","useState","useEffect","CardElement","useStripe","useElements","BlueButton","Input","Card","CheckoutForm","props","succeeded","setSucceeded","error","setError","processing","setProcessing","disabled","setDisabled","email","setEmail","clientSecret","setClientSecret","stripe","elements","window","fetch","method","headers","body","JSON","stringify","items","id","then","res","json","data","cardStyle","style","base","color","fontFamily","fontSmoothing","fontSize","invalid","iconColor","handleSubmit","ev","preventDefault","confirmCardPayment","receipt_email","payment_method","card","getElement","billing_details","name","target","value","payload","message","handleChange","event","empty","e"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,EAAsBC,SAAtB,EAAiCC,WAAjC,QAAoD,yBAApD;AACA,SAASC,UAAT,EAAqBC,KAArB,EAA4BC,IAA5B,QAAwC,uBAAxC;AAEA,eAAe,SAASC,YAAT,CAAsBC,KAAtB,EAA6B;AAAA;;AAAA,kBACRT,QAAQ,CAAC,KAAD,CADA;AAAA,MACnCU,SADmC;AAAA,MACxBC,YADwB;;AAAA,mBAEhBX,QAAQ,CAAC,IAAD,CAFQ;AAAA,MAEnCY,KAFmC;AAAA,MAE5BC,QAF4B;;AAAA,mBAGNb,QAAQ,CAAC,EAAD,CAHF;AAAA,MAGnCc,UAHmC;AAAA,MAGvBC,aAHuB;;AAAA,mBAIVf,QAAQ,CAAC,IAAD,CAJE;AAAA,MAInCgB,QAJmC;AAAA,MAIzBC,WAJyB;;AAAA,mBAKhBjB,QAAQ,CAAC,EAAD,CALQ;AAAA,MAKnCkB,KALmC;AAAA,MAK5BC,QAL4B;;AAAA,mBAMFnB,QAAQ,CAAC,EAAD,CANN;AAAA,MAMnCoB,YANmC;AAAA,MAMrBC,eANqB;;AAO1C,MAAMC,MAAM,GAAGnB,SAAS,EAAxB;AACA,MAAMoB,QAAQ,GAAGnB,WAAW,EAA5B;AAEAH,EAAAA,SAAS,CAAC,YAAM;AACd;AACAuB,IAAAA,MAAM,CACHC,KADH,CACS,4BADT,EACuC;AACnCC,MAAAA,MAAM,EAAE,MAD2B;AAEnCC,MAAAA,OAAO,EAAE;AACP,wBAAgB;AADT,OAF0B;AAKnCC,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AAAEC,QAAAA,KAAK,EAAE,CAAC;AAAEC,UAAAA,EAAE,EAAE;AAAN,SAAD;AAAT,OAAf;AAL6B,KADvC,EAQGC,IARH,CAQQ,UAACC,GAAD,EAAS;AACb,aAAOA,GAAG,CAACC,IAAJ,EAAP;AACD,KAVH,EAWGF,IAXH,CAWQ,UAACG,IAAD,EAAU;AACdf,MAAAA,eAAe,CAACe,IAAI,CAAChB,YAAN,CAAf;AACD,KAbH;AAcD,GAhBQ,EAgBN,EAhBM,CAAT;AAkBA,MAAMiB,SAAS,GAAG;AAChBC,IAAAA,KAAK,EAAE;AACLC,MAAAA,IAAI,EAAE;AACJC,QAAAA,KAAK,EAAE,SADH;AAEJC,QAAAA,UAAU,EAAE,mBAFR;AAGJC,QAAAA,aAAa,EAAE,aAHX;AAIJC,QAAAA,QAAQ,EAAE,MAJN;AAKJ,yBAAiB;AACfH,UAAAA,KAAK,EAAE;AADQ;AALb,OADD;AAULI,MAAAA,OAAO,EAAE;AACPJ,QAAAA,KAAK,EAAE,SADA;AAEPK,QAAAA,SAAS,EAAE;AAFJ;AAVJ;AADS,GAAlB;;AAkBA,MAAMC,YAAY;AAAA,wEAAG,iBAAOC,EAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AACnBA,cAAAA,EAAE,CAACC,cAAH;AACAjC,cAAAA,aAAa,CAAC,IAAD,CAAb;AAFmB;AAAA,qBAGGO,MAAM,CAAC2B,kBAAP,CAA0B7B,YAA1B,EAAwC;AAC5D8B,gBAAAA,aAAa,EAAEhC,KAD6C;AAE5DiC,gBAAAA,cAAc,EAAE;AACdC,kBAAAA,IAAI,EAAE7B,QAAQ,CAAC8B,UAAT,CAAoBnD,WAApB,CADQ;AAEdoD,kBAAAA,eAAe,EAAE;AACfC,oBAAAA,IAAI,EAAER,EAAE,CAACS,MAAH,CAAUD,IAAV,CAAeE;AADN;AAFH;AAF4C,eAAxC,CAHH;;AAAA;AAGbC,cAAAA,OAHa;;AAYnB,kBAAIA,OAAO,CAAC9C,KAAZ,EAAmB;AACjBC,gBAAAA,QAAQ,0BAAmB6C,OAAO,CAAC9C,KAAR,CAAc+C,OAAjC,EAAR;AACA5C,gBAAAA,aAAa,CAAC,KAAD,CAAb;AACD,eAHD,MAGO;AACLF,gBAAAA,QAAQ,CAAC,IAAD,CAAR;AACAE,gBAAAA,aAAa,CAAC,KAAD,CAAb;AACAJ,gBAAAA,YAAY,CAAC,IAAD,CAAZ;AACD;;AAnBkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZmC,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAsBA,MAAMc,YAAY;AAAA,yEAAG,kBAAOC,KAAP;AAAA;AAAA;AAAA;AAAA;AACnB;AACA;AACA5C,cAAAA,WAAW,CAAC4C,KAAK,CAACC,KAAP,CAAX;AACAjD,cAAAA,QAAQ,CAACgD,KAAK,CAACjD,KAAN,GAAciD,KAAK,CAACjD,KAAN,CAAY+C,OAA1B,GAAoC,EAArC,CAAR;;AAJmB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAZC,YAAY;AAAA;AAAA;AAAA,KAAlB;;AAOA,SACE;AAAA,wCAAe,cAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0igBAqKE;AAAM,IAAA,EAAE,EAAC,cAAT;AAAwB,IAAA,QAAQ,EAAEd,YAAlC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBADF,EAEE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,KAAK,EAAE5B,KAFT;AAGE,IAAA,QAAQ,EAAE,kBAAC6C,CAAD;AAAA,aAAO5C,QAAQ,CAAC4C,CAAC,CAACP,MAAF,CAASC,KAAV,CAAf;AAAA,KAHZ;AAIE,IAAA,WAAW,EAAC,qBAJd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAQE;AAAK,IAAA,EAAE,EAAC,cAAR;AAAA,wCAAiC,cAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,MAAC,WAAD;AAAa,IAAA,OAAO,EAAEpB,SAAtB;AAAiC,IAAA,QAAQ,EAAEuB,YAA3C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CARF,EAWE;AAAQ,IAAA,UAAU,EAAE9C,UAAU,IAAIE,QAAd,IAA0BN,SAA9C;AAAyD,IAAA,EAAE,EAAC,QAA5D;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,EAAE,EAAC,aAAT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGI,UAAU,GAAG;AAAyB,IAAA,EAAE,EAAC,SAA5B;AAAA,wCAAe,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,GAAkD,KAD/D,CADF,CAXF,EAgBE,MAAC,UAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAhBF,CArKF,EAwLGF,KAAK,IACJ;AAA4B,IAAA,IAAI,EAAC,OAAjC;AAAA,wCAAe,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGA,KADH,CAzLJ,EA8LGF,SAAS,IACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kDAEE;AAAG,IAAA,IAAI,8CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,GADH,sBAFF,EAKO,GALP,mCA/LJ,CADF;AA2MD;;GAtRuBF,Y;UAOPL,S,EACEC,W;;;KARKI,Y","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { CardElement, useStripe, useElements } from \"@stripe/react-stripe-js\";\nimport { BlueButton, Input, Card } from \"../ui/DavidComponents\";\n\nexport default function CheckoutForm(props) {\n  const [succeeded, setSucceeded] = useState(false);\n  const [error, setError] = useState(null);\n  const [processing, setProcessing] = useState(\"\");\n  const [disabled, setDisabled] = useState(true);\n  const [email, setEmail] = useState(\"\");\n  const [clientSecret, setClientSecret] = useState(\"\");\n  const stripe = useStripe();\n  const elements = useElements();\n\n  useEffect(() => {\n    // Create PaymentIntent as soon as the page loads\n    window\n      .fetch(\"/api/create-payment-intent\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ items: [{ id: \"xl-tshirt\" }] }),\n      })\n      .then((res) => {\n        return res.json();\n      })\n      .then((data) => {\n        setClientSecret(data.clientSecret);\n      });\n  }, []);\n\n  const cardStyle = {\n    style: {\n      base: {\n        color: \"#32325d\",\n        fontFamily: \"Inter, sans-serif\",\n        fontSmoothing: \"antialiased\",\n        fontSize: \"16px\",\n        \"::placeholder\": {\n          color: \"#32325d\",\n        },\n      },\n      invalid: {\n        color: \"#fa755a\",\n        iconColor: \"#fa755a\",\n      },\n    },\n  };\n\n  const handleSubmit = async (ev) => {\n    ev.preventDefault();\n    setProcessing(true);\n    const payload = await stripe.confirmCardPayment(clientSecret, {\n      receipt_email: email,\n      payment_method: {\n        card: elements.getElement(CardElement),\n        billing_details: {\n          name: ev.target.name.value,\n        },\n      },\n    });\n    if (payload.error) {\n      setError(`Payment failed ${payload.error.message}`);\n      setProcessing(false);\n    } else {\n      setError(null);\n      setProcessing(false);\n      setSucceeded(true);\n    }\n  };\n\n  const handleChange = async (event) => {\n    // Listen for changes in the CardElement\n    // and display any errors as the customer types their card details\n    setDisabled(event.empty);\n    setError(event.error ? event.error.message : \"\");\n  };\n\n  return (\n    <div className=\"payment-form\">\n      <style jsx>{`\n        .payment-form {\n          font-family: \"Inter\", -apple-system, BlinkMacSystemFont, sans-serif;\n          font-size: 1rem;\n          -webkit-font-smoothing: antialiased;\n          display: flex;\n          justify-content: center;\n          align-content: center;\n          height: 100vh;\n          width: 100vw;\n        }\n        form {\n          width: 30vw;\n          align-self: center;\n        }\n        label {\n          font-size: 0.9rem;\n          font-weight: 400;\n          color: #2d3748;\n          margin-bottom: 12px;\n        }\n        input {\n          border-radius: 16px;\n          margin-bottom: 6px;\n          padding: 12px;\n          padding-left: 16px;\n          border: 1px solid #e2e8f0;\n          max-height: 60px;\n          font-size: 1rem;\n          width: 100%;\n          background: white;\n          box-sizing: border-box;\n          font-weight: 500;\n          margin-bottom: 12px;\n        }\n\n        input::placeholder {\n          color: #a0aec0;\n        }\n\n        input:focus {\n          border-radius: 16px;\n        }\n\n        .result-message {\n          line-height: 22px;\n          font-size: 16px;\n        }\n        .result-message a {\n          color: rgb(89, 111, 214);\n          font-weight: 600;\n          text-decoration: none;\n        }\n        .hidden {\n          display: none;\n        }\n        .card-error {\n          color: rgb(105, 115, 134);\n          font-size: 16px;\n          line-height: 20px;\n          margin-top: 12px;\n          text-align: center;\n        }\n\n        .card-element {\n          border-radius: 16px;\n          padding: 12px;\n          border: 1px solid #e2e8f0;\n          width: 100%;\n          background: white;\n          box-sizing: border-box;\n          margin-bottom: 16px;\n        }\n\n        #payment-request-button {\n          margin-bottom: 32px;\n        }\n        /* Buttons and links */\n        button {\n          background: #3182ce;\n          color: #ffffff;\n          border-radius: 16px;\n          border: 1px solid #2a69ac;\n          padding: 12px 16px;\n          font-size: 16px;\n          font-weight: 600;\n          cursor: pointer;\n          display: block;\n          transition: all 0.2s ease;\n          box-shadow: 0px 4px 5.5px 0px rgba(0, 0, 0, 0.07);\n          width: 100%;\n        }\n        button:hover {\n          background: #2a69ac;\n        }\n        button:disabled {\n          opacity: 0.5;\n          cursor: default;\n        }\n        /* spinner/processing state, errors */\n        .spinner,\n        .spinner:before,\n        .spinner:after {\n          border-radius: 50%;\n        }\n        .spinner {\n          color: #ffffff;\n          font-size: 22px;\n          text-indent: -99999px;\n          margin: 0px auto;\n          position: relative;\n          width: 20px;\n          height: 20px;\n          box-shadow: inset 0 0 0 2px;\n          -webkit-transform: translateZ(0);\n          -ms-transform: translateZ(0);\n          transform: translateZ(0);\n        }\n        .spinner:before,\n        .spinner:after {\n          position: absolute;\n          content: \"\";\n        }\n        .spinner:before {\n          width: 10.4px;\n          height: 20.4px;\n          background: #5469d4;\n          border-radius: 20.4px 0 0 20.4px;\n          top: -0.2px;\n          left: -0.2px;\n          -webkit-transform-origin: 10.4px 10.2px;\n          transform-origin: 10.4px 10.2px;\n          -webkit-animation: loading 2s infinite ease 1.5s;\n          animation: loading 2s infinite ease 1.5s;\n        }\n        .spinner:after {\n          width: 10.4px;\n          height: 10.2px;\n          background: #5469d4;\n          border-radius: 0 10.2px 10.2px 0;\n          top: -0.1px;\n          left: 10.2px;\n          -webkit-transform-origin: 0px 10.2px;\n          transform-origin: 0px 10.2px;\n          -webkit-animation: loading 2s infinite ease;\n          animation: loading 2s infinite ease;\n        }\n        @keyframes loading {\n          0% {\n            -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n          }\n          100% {\n            -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n          }\n        }\n        @media only screen and (max-width: 600px) {\n          form {\n            width: 80vw;\n          }\n        }\n      `}</style>\n\n      <form id=\"payment-form\" onSubmit={handleSubmit}>\n        <label>Email Address</label>\n        <input\n          type=\"text\"\n          value={email}\n          onChange={(e) => setEmail(e.target.value)}\n          placeholder=\"Enter email address\"\n        />\n        <div id=\"card-element\" className=\"card-element\">\n          <CardElement options={cardStyle} onChange={handleChange} />\n        </div>\n        <button isDisabled={processing || disabled || succeeded} id=\"submit\">\n          <span id=\"button-text\">\n            {processing ? <div className=\"spinner\" id=\"spinner\"></div> : \"Pay\"}\n          </span>\n        </button>\n        <BlueButton>Test</BlueButton>\n      </form>\n      {/* Show any error that happens when processing the payment */}\n      {error && (\n        <div className=\"card-error\" role=\"alert\">\n          {error}\n        </div>\n      )}\n      {/* Show a success message upon completion */}\n      {succeeded && (\n        <p>\n          Payment succeeded, see the result in your\n          <a href={`https://dashboard.stripe.com/test/payments`}>\n            {\" \"}\n            Stripe dashboard.\n          </a>{\" \"}\n          Refresh the page to pay again.\n        </p>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}